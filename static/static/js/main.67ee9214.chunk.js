(this.webpackJsonpgamelinks=this.webpackJsonpgamelinks||[]).push([[0],{11:function(e){e.exports=JSON.parse('{"url":"http://localhost:3000","backend_url":"http://localhost:9000"}')},269:function(e,t,a){e.exports=a(565)},274:function(e,t,a){},393:function(e,t){},487:function(e,t,a){},555:function(e,t,a){},557:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),o=a.n(s),c=(a(274),a(30)),i=a(31),l=a(34),u=a(32),m=a(35),h=a(26),d=a(76),f=(a(156),a(18)),g=(a(86),a(4)),p=(a(87),a(27)),E=(a(78),a(28)),v=a(11),b=(E.a.Search,p.a.Title),k=function(e){return console.log(e.user),r.a.createElement("div",{style:{width:"100%",backgroundColor:"#041527"}},r.a.createElement("div",null,r.a.createElement(b,{style:{float:"left",color:"white",position:"absolute",left:"10px",top:"16px"},level:4},"GAMELINKS"),r.a.createElement(f.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["0"],style:{lineHeight:"64px"},align:"right"},r.a.createElement(f.a.Item,{key:"0"},r.a.createElement(h.b,{to:"/"},r.a.createElement(g.a,{type:"home"}))),r.a.createElement(f.a.Item,null,r.a.createElement(h.b,{to:"/profile?id=".concat(e.user?e.user._id:void 0)},"profile")),r.a.createElement(f.a.Item,{disabled:!e.user},r.a.createElement(h.b,{to:"/inbox"},"inbox")),r.a.createElement(f.a.Item,null,r.a.createElement(h.b,{to:"/people"},"hosts")),r.a.createElement(f.a.Item,null,r.a.createElement(h.b,{to:"/games"},"games")))))},I=(a(64),a(19)),y=(a(92),a(42)),S=a(17),w=a.n(S),O=y.a.Content,C=p.a.Title,j=(p.a.Text,function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(v.backend_url,"/profile/getCurrentUserInformation")).then((function(t){t||e.props.setUser(null)}))}},{key:"render",value:function(){return console.log(this.props.user),r.a.createElement(O,{style:{padding:"0 50px",marginTop:64}},r.a.createElement(C,{type:"secondary"},"show off your stats."),r.a.createElement("br",null),r.a.createElement(C,{type:"secondary"},"connect and join with hosts."),r.a.createElement("br",null)," ",r.a.createElement(C,{type:"secondary"},"share what's good."),r.a.createElement("br",null),r.a.createElement("div",{align:"center"},this.props.user?r.a.createElement("a",{href:"".concat(v.backend_url,"/auth/logout")},r.a.createElement(I.a,null,"Log Out")):r.a.createElement("a",{href:"".concat(v.backend_url,"/auth/facebook")},r.a.createElement(I.a,null,"Log in with Facebook"))))}}]),t}(r.a.Component)),x=(a(218),a(117)),_=(a(566),a(266)),P=(a(254),a(116)),H=(a(173),a(75)),M=a(194),N=a(22),T=a.n(N),A=a(53),U=a(43),R=a(259),F=a.n(R),G=(a(96),E.a.Search),D=(E.a.TextArea,y.a.Content),z=y.a.Sider,L=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onReceiveMessage=function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(A.a)({},a.state.userID,{value:t}),a.state.title="Receive Message",e.next=4,w.a.post("".concat(v.backend_url,"/messaging/addToChatHistory"),t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({shared:!1,visible:!1})},a.onChange=function(e){a.setState({message:e.target.value})},a.handleEnter=function(e){a.onSendMessage(a.state.message),a.setState({message:""})},a.state={apiResponse:[],messages:[],message:"",username:"",name:"",partner:"",title:"",visible:!1,userInfo:{},shared:!1},a.gid="",a.socket=F()("localhost:9000"),a.socket.on("RECEIVE_MESSAGE",(function(e){console.log("RECEIVED MESSAGE"),n(e)}));var n=function(e){console.log("In add message from socket"),console.log(e),a.state.messages=[].concat(Object(M.a)(a.state.messages),[e]),a.forceUpdate(),console.log(a.state.messages)};return a.sendMessage=function(e){console.log("in send message"),console.log(e),console.log(a.socket.id),e.socket2=a.socket.id,a.socket.emit("SEND_MESSAGE",e)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"inbox",value:function(){var e=this;console.log(window.location.href),this.state.title="Inbox",this.setState({username:this.props.user.firstName}),fetch("".concat(v.backend_url,"/messaging/inbox")).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({apiResponse:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"addMessage",value:function(e){console.log("In add message"),console.log(e),this.setState({messages:[].concat(Object(M.a)(this.state.messages),[e])}),console.log(this.state.messages)}},{key:"messages",value:function(){var e=this;this.state.title="Messages",console.log("finding or creating chat"),this.state.title="Chat";var t=window.location.href.split("?id=");fetch("".concat(v.backend_url,"/messaging/addChatPartner?id=").concat(t[1])).then((function(){console.log("GETTING NEW MESSAGE"),e.setState({visible:!0}),e.getChat(t[1])})).then((function(){e.inbox()})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"getChat",value:function(e){var t=this;this.state.title="Chat",this.setState({partner:e}),console.log("getting chat"),w.a.get("".concat(v.backend_url,"/profile/getCurrentUserInformation")).then((function(a){console.log(a),t.setState({userInfo:a.data}),console.log(t.state.userInfo.sharedWith),console.log(e);var n=t.state.userInfo.sharedWith.indexOf(e)>-1;t.setState({shared:n}),console.log("Sharing is:"),console.log(n)})).catch((function(e){return console.warn(e)})),w.a.get("".concat(v.backend_url,"/profile/getNameByID?id=").concat(e)).then((function(a){return console.log("now, getting chat history"),console.log(a.data.fname),t.setState({name:a.data.fname}),fetch("".concat(v.backend_url,"/messaging/getChatHistory?id=").concat(e))})).then((function(e){return e.json()})).then((function(e){return t.setState({messages:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"addToHistory",value:function(e){var t=this;console.log("in add to chat history"),this.state.title="Add to history",console.log(e);var a=JSON.stringify({userID1:this.props.user._id,userID2:this.state.partner,message:e});console.log(a),fetch("".concat(v.backend_url,"/messaging/addToChatHistory"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is ".concat(e))}))}},{key:"onSendMessage",value:function(e){var t={author:this.props.user.firstName,user1:this.props.user._id,user2:this.state.partner,socket2:"",message:e};this.sendMessage(t),this.addMessage(t),this.addToHistory(t)}},{key:"handleShare",value:function(){var e=this;this.state.shared?w.a.post("".concat(v.backend_url,"/profile/removeSharedWith?id=").concat(this.state.partner)).then((function(t){console.log(t),e.setState({shared:!1}),console.log(e.state.shared)})).catch((function(e){return console.warn(e)})):w.a.post("".concat(v.backend_url,"/profile/addSharedWith?id=").concat(this.state.partner)).then((function(t){console.log(t),e.setState({shared:!0}),console.log(e.state.shared)})).catch((function(e){return console.warn(e)}))}},{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(v.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.setState({userInfo:t.data})})).catch((function(e){return console.warn(e)})),window.location.href.includes("messages")?this.messages():this.inbox()}},{key:"render",value:function(){var e=this,t=this.state;t.visible,t.loading;return r.a.createElement("div",null,r.a.createElement(y.a,{style:{minHeight:"90vh"}},r.a.createElement(z,null,r.a.createElement(H.a,{size:64,src:this.state.userInfo?this.state.userInfo.profilePicture:void 0}),r.a.createElement("span",{style:{color:"white"}},this.state.userInfo?this.state.userInfo.username:void 0),r.a.createElement(f.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["3"]},r.a.createElement(f.a.Item,{key:"1"},r.a.createElement(g.a,{type:"upload"}),r.a.createElement("span",{className:"nav-text"},"inbox")),r.a.createElement(f.a.Item,{key:"2"},this.props.user&&r.a.createElement(h.b,{to:"/profile?id=".concat(this.props.user._id)},r.a.createElement(g.a,{type:"user"}),"back to profile")))),r.a.createElement(y.a,null,r.a.createElement(D,{style:{margin:"0 16px"}},r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:475}},r.a.createElement("div",{className:"scrollable-container",ref:function(t){e.container=t}},this.state.apiResponse.map((function(t){return r.a.createElement("div",{className:"p1"},r.a.createElement(P.a,{hoverable:!0,title:t.name},r.a.createElement(I.a,{size:"large",onClick:function(){e.showModal(),e.getChat(t.id)}},"Message")),r.a.createElement(x.a,{visible:e.state.visible,title:e.state.name,onOk:e.handleOk,onCancel:e.handleCancel,footer:[r.a.createElement(I.a,{key:"share",onClick:function(){return e.handleShare()}},e.state.shared?"Stop Sharing Info":"Share Your Info"),r.a.createElement(I.a,{key:"back",onClick:e.handleCancel},"Return")]},r.a.createElement(_.a,{size:"large"},e.state.messages.map((function(e){return r.a.createElement("div",null,e.author,": ",e.message)}))),r.a.createElement(G,{size:"large",placeholder:"Enter here",value:e.state.message||"",enterButton:"Send",onChange:e.onChange,onSearch:e.handleEnter})))}))))))))}}]),t}(r.a.Component),B=(a(133),a(66)),V=(a(567),a(265)),q=(a(126),a(50)),W=a(149),J=(a(417),a(153)),K=a(37),Y=(a(419),a(58)),Q=a(195),Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleAdditionalInfoOk=function(){var e=Object(U.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields((function(e,t){e||a.props.setAddInfo(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t,a,n,s,o=this.props.form.getFieldDecorator,c=this.props.user.address?this.props.user.address.split(","):["","","","",""];if(5==c.length){var i=Object(Q.a)(c,5);e=i[0],t=i[1],a=i[2],n=i[3],s=i[4]}else{var l=Object(Q.a)(c,4);e=l[0],a=l[1],n=l[2],s=l[3]}return r.a.createElement(Y.a,{name:"addInfo-form",onSubmit:this.handleAdditionalInfoOk},r.a.createElement(Y.a.Item,{label:"Username"},o("username",{rules:[{required:!0,message:"Please input your username"}],initialValue:this.props.user.username})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"Address Line 1"},o("addr1",{rules:[{required:!0,message:"Please input an Address"}],initialValue:e})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"Address Line 2"},o("addr2",{initialValue:t})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"City"},o("city",{rules:[{required:!0,message:"Please input a city"}],initialValue:a})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"State"},o("state",{rules:[{required:!0,message:"Please input a state"}],initialValue:n})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"Zip Code"},o("zip",{rules:[{required:!0,message:"Please input a zip code"}],initialValue:s})(r.a.createElement(E.a,null))),r.a.createElement(Y.a.Item,{label:"Bio"},o("bio",{rules:[{required:!0,message:"Please write a short description about yourself"}],initialValue:this.props.user.bio})(r.a.createElement(E.a.TextArea,{rows:4}))),r.a.createElement(Y.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Ok")))}}]),t}(r.a.Component),$=Y.a.create({name:"addInfoForm"})(Z),X=a(96),ee=a.n(X),te=(a(487),p.a.Title),ae=p.a.Text,ne=p.a.Paragraph,re=(y.a.Content,E.a.Search),se=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={userId:null,isProfileOwner:!1,showProfileModal:!1,showAdditionalInfoModal:!1},a.onUsernameEdit=function(e){var t=Object(A.a)({},a.state.userInfo,{username:e});w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),t).then((function(e){a.setState({userInfo:t})})).catch((function(e){J.a.error("A user with this username already exists. Please choose another.")}))},a.onBioEdit=function(){var e=Object(U.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(A.a)({},a.state.userInfo,{bio:t}),a.setState({userInfo:n}),e.next=4,w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeCard=function(){var e=Object(U.a)(T.a.mark((function e(t,n){var r,s,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("removing card"),a.state.userInfo[t].filter((function(e,t,a){return e!==n.toString()||(r=t,!1)})),(s=a.state[t]).splice(2*r,2),(o=Object(A.a)({},a.state.userInfo))[t]={id:n,operation:"remove"},a.setState(Object(W.a)({userInfo:o},t,s)),e.next=9,w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),o);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.openProfileModal=function(){a.setState({showProfileModal:!0})},a.openAdditionalInfoModal=function(){a.setState({showAdditionalInfoModal:!0})},a.closeAdditionalInfoModal=function(){a.setState({showAdditionalInfoModal:!1})},a.handleProfileModalCancel=function(){a.setState({showProfileModal:!1})},a.handleProfileModalOk=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("handleok"),a.state.newProfilePicture?((n=new FormData).append("myImage",a.state.newProfilePicture),a.setState({newProfilePicture:void 0}),r={headers:{"content-type":"multipart/form-data"}},w.a.post("".concat(v.backend_url,"/profile/editProfilePicture"),n,r).then((function(e){a.setState({showProfileModal:!1})}))):a.setState({showProfileModal:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setAddInfo=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,r,s,o,c,i,l,u,m;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=t.username,r=t.addr1,s=t.addr2,o=t.city,c=t.state,i=t.zip,l=t.bio,u=s?"".concat(r,", ").concat(s,", ").concat(o,", ").concat(c,", ").concat(i):"".concat(r,", ").concat(o,", ").concat(c,", ").concat(i),m=Object(A.a)({},a.state.userInfo,{address:u,username:n,city:o,bio:l}),w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),m).then((function(){a.setState({userInfo:m,showAdditionalInfoModal:!1})})).catch((function(){J.a.error("A user with this username already exists. Please choose another.")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getGameList=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,s,o,c,i,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.userInfo&&a.state.userInfo[t]){e.next=2;break}return e.abrupt("return",r.a.createElement(q.a,null));case 2:for(n=a.state.userInfo[t],s=[],o=0;o<n.length;o+=1)c=w.a.get("".concat(v.backend_url,"/igdb/game?id=").concat(n[o])),i=w.a.get("".concat(v.backend_url,"/igdb/cover?id=").concat(n[o])),s.push(c,i);return e.next=7,Promise.all(s);case 7:l=e.sent,"hosting"===t?a.setState({hosting:l}):a.setState({favorites:l});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setNewProfilePicture=function(e){var t=e.file,n=e.onSuccess;a.setState({newProfilePicture:t}),console.log(a.state.newProfilePicture),setTimeout((function(){n("ok")}),0)},a.handleUploadChange=function(e){var t=[e.fileList];a.setState({fileList:t[0]})},a.nextHosting=a.nextHosting.bind(Object(K.a)(a)),a.prevHosting=a.prevHosting.bind(Object(K.a)(a)),a.nextFavorites=a.nextFavorites.bind(Object(K.a)(a)),a.prevFavorites=a.prevFavorites.bind(Object(K.a)(a)),a.setNewProfilePicture=a.setNewProfilePicture.bind(Object(K.a)(a));var n=ee.a.parse(e.location.search);return a.state.userId=n.id,a.carouselHosting=r.a.createRef(),a.carouselFavorites=r.a.createRef(),console.log(e),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(v.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.props.setUser(t.data)})).then((function(){return w()({url:"".concat(v.backend_url,"/profile/getProfileUserInformation?id=").concat(e.state.userId),method:"GET"})})).then((function(t){return e.setState({userInfo:t.data}),e.props.user&&(e.setState({isProfileOwner:t.data._id===e.props.user._id}),t.data.latitude&&t.data.longitude)?w()({url:"".concat(v.backend_url,"/profile/distance?lat=").concat(t.data.latitude,"&long=").concat(t.data.longitude),method:"GET"}):null})).then((function(t){t&&e.setState({distance:t.data.distance.toString()})})).then((function(){console.log(e.state.userInfo),!e.state.isProfileOwner||e.state.userInfo.username&&e.state.userInfo.bio&&(e.state.userInfo.address||e.state.userInfo.city)||e.setState({showAdditionalInfoModal:!0})})).then((function(){e.getGameList("hosting")})).then((function(){e.getGameList("favorites"),console.log(e.state)})).catch((function(e){console.log(e)}))}},{key:"nextHosting",value:function(){this.carouselHosting.next()}},{key:"prevHosting",value:function(){this.carouselHosting.prev()}},{key:"nextFavorites",value:function(){this.carouselFavorites.next()}},{key:"prevFavorites",value:function(){this.carouselFavorites.prev()}},{key:"search",value:function(e){var t=this;fetch("".concat(v.backend_url,"/profile/searchByUser?nickname=").concat(e)).then((function(e){return e.json()})).then((function(e){t.setState({userId:e}),t.componentDidMount(),console.log("Found user with id "+e)})).catch((function(){J.a.error("User with that name not found"),console.log("Did not find user with name "+e)}))}},{key:"render",value:function(){var e=this,t=function(t){console.log("creatingCards");var a=e.state[t];if(a){for(var n=[],s=function(s){n.push(r.a.createElement("div",{className:"card",key:s},r.a.createElement(h.b,{to:"/singlegame/?id=".concat(a[s].data.id)},r.a.createElement("img",{src:"http://"+a[s+1].data})),r.a.createElement("div",{className:"card-text-box"},r.a.createElement("span",{className:"card-text"},a[s].data.name),r.a.createElement("br",null),e.state.isProfileOwner&&r.a.createElement(ae,{className:"card-text",style:{cursor:"pointer"},onClick:function(){e.removeCard(t,a[s].data.id)}},"Remove"))))},o=0;o<a.length;o+=2)s(o);return n}},a=t("hosting")||[],n=t("favorites")||[],s={dots:!0,speed:500,circular:!1,slidesToScroll:4,slidesToShow:4};return r.a.createElement("div",{id:"main"},r.a.createElement(x.a,{title:"Please add some additional Information",visible:this.state.showAdditionalInfoModal,footer:[]},r.a.createElement(ae,null,"Other users will only be able to see the City you are in. You can choose to share your full address with other users."),r.a.createElement($,{setAddInfo:this.setAddInfo,user:this.props.user})),r.a.createElement(x.a,{title:"Change Profile Picture",visible:this.state.showProfileModal,onCancel:this.handleProfileModalCancel,footer:[r.a.createElement(I.a,{key:"cancel",onClick:this.handleProfileModalCancel},"Cancel"),r.a.createElement(I.a,{key:"submit",form:"profile-form",htmlType:"submit"},"Ok")]},r.a.createElement("form",{id:"profile-form",onSubmit:this.handleProfileModalOk},r.a.createElement(V.a.Dragger,{name:"file",multiple:!1,customRequest:this.setNewProfilePicture,onChange:this.handleUploadChange,accept:"image/*",fileList:this.state.fileList},r.a.createElement("p",{className:"ant-upload-text"},"Click or drag a picture")))),r.a.createElement("div",{className:"user_info"},(!this.state.userInfo||!this.state.userInfo.profilePicture)&&r.a.createElement(g.a,{style:{fontSize:"150px"},type:"user"}),this.state.userInfo&&this.state.userInfo.profilePicture&&r.a.createElement("div",null,r.a.createElement("img",{className:"profile_image",src:this.state.userInfo.profilePicture})),this.state.isProfileOwner&&r.a.createElement(ae,{id:"change_profile_pic",onClick:this.openProfileModal},"Change Profile Picture"),r.a.createElement("div",{id:"name_and_loc"},r.a.createElement("div",{id:"name"},this.state.userInfo&&this.state.userInfo.username&&(this.state.isProfileOwner?r.a.createElement(te,{editable:{onChange:this.onUsernameEdit}},this.state.userInfo.username):r.a.createElement(te,null,this.state.userInfo.username))),r.a.createElement("div",{align:"right"},r.a.createElement(re,{placeholder:"search user",onSearch:function(t){return e.search(t)},style:{width:200,justify:"right"},enterButton:!0})),r.a.createElement("br",null),r.a.createElement("div",{id:"loc"},this.state.userInfo&&this.state.userInfo.address?r.a.createElement(te,{level:3},this.state.userInfo.address):this.state.userInfo?r.a.createElement(te,{level:3},this.state.userInfo.city):r.a.createElement(r.a.Fragment,null)),this.state.distance&&r.a.createElement(ae,{id:"distance"},this.state.distance," miles away")),this.state.isProfileOwner&&r.a.createElement(I.a,{type:"primary",id:"edit",onClick:this.openAdditionalInfoModal},"Edit profile")),r.a.createElement("hr",null),r.a.createElement("div",{id:"hosting"},r.a.createElement(te,{level:2},"Games Hosting"),r.a.createElement("hr",null),r.a.createElement("div",{className:"games_list"},r.a.createElement("div",{className:"games_list_children"},a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"games_list_carousel"},r.a.createElement(B.a,Object.assign({ref:function(t){return e.carouselHosting=t}},s,{slidesToShow:Math.min(4,a.length)}),a)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(g.a,{type:"left-circle",className:"scroll",onClick:this.prevHosting}),r.a.createElement(g.a,{type:"right-circle",className:"scroll",onClick:this.nextHosting}))):r.a.createElement(q.a,null))),r.a.createElement(te,{level:2},"Favorites"),r.a.createElement("hr",null),r.a.createElement("div",{className:"games_list"},r.a.createElement("div",{className:"games_list_children"},n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"games_list_carousel"},r.a.createElement(B.a,Object.assign({ref:function(t){return e.carouselFavorites=t}},s,{slidesToShow:Math.min(4,n.length)}),n)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(g.a,{type:"left-circle",className:"scroll",onClick:this.prevFavorites}),r.a.createElement(g.a,{type:"right-circle",className:"scroll",onClick:this.nextFavorites}))):r.a.createElement(q.a,null)))),r.a.createElement("div",{id:"bio"},r.a.createElement("div",{id:"bio_title"},r.a.createElement(te,{level:3},"bio")),r.a.createElement("div",{id:"bio_info"},this.state.userInfo&&this.state.userInfo.bio&&(this.state.isProfileOwner?r.a.createElement(ne,{ellipsis:{rows:5,expandable:!0},editable:{onChange:this.onBioEdit}},this.state.userInfo.bio):r.a.createElement(ne,{ellipsis:{rows:5,expandable:!0}},this.state.userInfo.bio))),this.props.user&&!this.state.isProfileOwner&&r.a.createElement(h.b,{to:"/messages?id=".concat(this.state.userId)},r.a.createElement(te,{level:3},r.a.createElement(g.a,{type:"mail"})," Message this host"))))}}]),t}(r.a.Component),oe=(a(171),a(56)),ce=(a(172),a(23)),ie=(a(553),a(267)),le=(a(555),f.a.SubMenu),ue=(y.a.Content,E.a.Search),me=p.a.Title,he=p.a.Text,de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).genre_filter=r.a.createElement(f.a,null,r.a.createElement(le,{title:"A-I"},r.a.createElement(f.a.Item,{onClick:function(){return a.genre("adventure")}},"Adventure"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("arcade")}},"Arcade"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("fighting")}},"Fighting"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("hack-and-slash-beat-em-up")}},"Hack-and-Slash / Beat-Em-Up"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("indie")}},"Indie")),r.a.createElement(le,{title:"M-P"},r.a.createElement(f.a.Item,{onClick:function(){return a.genre("music")}},"Music"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("pinball")}},"Pinball"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("platform")}},"Platform"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("point-and-click")}},"Point-and-Click"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("puzzle")}},"Puzzle")),r.a.createElement(le,{title:"Q-R"},r.a.createElement(f.a.Item,{onClick:function(){return a.genre("quiz-trivia")}},"Quiz / Trivia"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("racing")}},"Racing"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("real-time-strategy-rts")}},"RTS"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("role-playing-rpg")}},"RPG")),r.a.createElement(le,{title:"S"},r.a.createElement(f.a.Item,{onClick:function(){return a.genre("shooter")}},"Shooter"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("simulator")}},"Simulator"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("sport")}},"Sport"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("strategy")}},"Strategy")),r.a.createElement(le,{title:"T-V"},r.a.createElement(f.a.Item,{onClick:function(){return a.genre("tactical")}},"Tactical"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("turn-based-strategy-tbs")}},"Turn-Based"),r.a.createElement(f.a.Item,{onClick:function(){return a.genre("visual-novel")}},"Visual-Novel"))),a.next=a.next.bind(Object(K.a)(a)),a.previous=a.previous.bind(Object(K.a)(a)),a.carousel=r.a.createRef(),a.limit="50",a.state={apiResponse:[],title:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"next",value:function(){this.carousel.next()}},{key:"previous",value:function(){this.carousel.prev()}},{key:"search",value:function(e){var t=this;this.state.title='Search for: "'.concat(e,'"'),fetch("".concat(v.backend_url,"/igdb/search?title=").concat(e)).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"popular",value:function(){var e=this;this.state.title="Most Popular",fetch("".concat(v.backend_url,"/igdb/popular?limit=").concat(this.limit)).then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"genre",value:function(e){var t=this;this.state.title='Genre: "'.concat(e,'"'),fetch("".concat(v.backend_url,"/igdb/searchbyGenre?genre=").concat(e,"&limit=").concat(this.limit)).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"recommended",value:function(){var e=this;this.state.title="Recommended",fetch("".concat(v.backend_url,"/profile/getGenreHistory")).then((function(e){return e.json()})).then((function(t){console.log(t);var a={genres:t,limit:e.limit};w.a.post("".concat(v.backend_url,"/igdb/recommendedGames"),a).then((function(t){console.log(t.data),e.setState({apiResponse:t.data})})).catch((function(e){return console.log("Error is: ".concat(e))}))})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"componentDidMount",value:function(){this.popular()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(oe.a,null,r.a.createElement(ce.a,{span:18},r.a.createElement("div",null,r.a.createElement(he,null,"Browse By "),r.a.createElement(I.a,{onClick:function(){return e.popular()}},"popular"),r.a.createElement(ie.a,{overlay:this.genre_filter},r.a.createElement(I.a,null,"genre ",r.a.createElement(g.a,{type:"down"}))),r.a.createElement(I.a,{onClick:function(){return e.recommended()}},"recommended"))),r.a.createElement(ce.a,{span:6},r.a.createElement(ue,{placeholder:"Search by Name",onSearch:function(t){return e.search(t)}}))),r.a.createElement("br",null),r.a.createElement(me,null,this.state.title),r.a.createElement(B.a,Object.assign({class:"carousel",ref:function(t){return e.carousel=t}},{dots:!0,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:6}),this.state.apiResponse.map((function(e){return r.a.createElement("div",{className:"image-container"},r.a.createElement(h.b,{to:"/singlegame/?id=".concat(e.id)},r.a.createElement("img",{className:"elem-image",src:"http://"+e.coverUrl})),r.a.createElement("div",{className:"name-text-box"},r.a.createElement("p",{className:"name-text"},e.name)))}))),r.a.createElement(H.a,{className:"arrow-left",size:"large",icon:"left-circle",onClick:this.previous}),r.a.createElement(H.a,{className:"arrow-right",size:"large",icon:"right-circle",onClick:this.next}))}}]),t}(r.a.Component),fe=(a(556),a(557),p.a.Title),ge=p.a.Text,pe=(p.a.Paragraph,y.a.Content,function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={userId:null},a.getHostList=function(){var e=Object(U.a)(T.a.mark((function e(t){var n,s,o,c,i,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.results){e.next=2;break}return e.abrupt("return",r.a.createElement(q.a,null));case 2:for(n=a.state.results,console.log(n),s=[],o=0;o<n.length;o+=1)c=n[o],console.log(c),i=w.a.get("".concat(v.backend_url,"/profile/getProfileUserInformation?id=").concat(c._id)),c.hosting!=[]&&s.push(i);return e.next=8,Promise.all(s);case 8:l=e.sent,a.setState({hosts:l});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.nextHosting=a.nextHosting.bind(Object(K.a)(a)),a.prevHosting=a.prevHosting.bind(Object(K.a)(a));var n=ee.a.parse(e.location.search);return a.state.userId=n.id,a.carouselHosting=r.a.createRef(),console.log(e),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(v.backend_url,"/profile/getAllUsers")).then((function(t){console.log(t.data),e.setState({results:t.data}),e.getHostList(t)})).catch((function(e){console.log(e)}))}},{key:"nextHosting",value:function(){this.carouselHosting.next()}},{key:"prevHosting",value:function(){this.carouselHosting.prev()}},{key:"render",value:function(){var e=this,t=function(){console.log("creatingHostCards");var t=e.state.hosts;if(console.log(t),t){for(var a=[],n=0;n<t.length;n+=1)a.push(r.a.createElement("div",{className:"card"},r.a.createElement(h.b,{to:"/profile/?id=".concat(t[n].data._id)},r.a.createElement("img",{src:t[n].data.profilePicture}),r.a.createElement("div",{className:"card-text-box"},r.a.createElement(ge,{className:"card-text"},t[n].data.username)))));return a}}()||[];return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement(fe,{level:2},"Hosts for You"),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",null,t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(B.a,Object.assign({ref:function(t){return e.carouselHosting=t}},{dots:!0,speed:500,circular:!1,slidesToScroll:4},{slidesToShow:Math.min(4,t.length)}),t)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(g.a,{type:"left-circle",className:"scroll",onClick:this.prevHosting}),r.a.createElement(g.a,{type:"right-circle",className:"scroll",onClick:this.nextHosting}))):r.a.createElement(q.a,null))))}}]),t}(r.a.Component)),Ee=(a(558),a(85)),ve=(a(560),a(196)),be=(a(562),a(193)),ke=(n.Component,a(564),y.a.Content),Ie=(E.a.Search,p.a.Title),ye=p.a.Text,Se=a(96),we=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).hostGame=Object(U.a)(T.a.mark((function e(){var t,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user._id,n=a.gid,console.log("Adding Host for game "+n+" for user "+t),e.next=5,w.a.post("".concat(v.backend_url,"/games/addHost"),null,{params:{id:n,userId:t}}).then((function(e){a.setState({hosting:!0}),console.log(e)})).catch((function(e){return console.warn(e)}));case 5:r=Object(A.a)({},a.state.userInfo,{hosting:{id:n,operation:"add"}}),w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),r).then((function(e){a.setState({userInfo:r}),console.log(e)})).catch((function(e){console.warn(e)}));case 7:case"end":return e.stop()}}),e)}))),a.unhostGame=Object(U.a)(T.a.mark((function e(){var t,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user._id,n=a.gid,console.log("Removing Host for game "+n+" for user "+t),e.next=5,w.a.post("".concat(v.backend_url,"/games/removeHost"),null,{params:{id:n,userId:t}}).then((function(e){a.setState({hosting:!1}),console.log(e)})).catch((function(e){return console.warn(e)}));case 5:r=Object(A.a)({},a.state.userInfo,{hosting:{id:n,operation:"remove"}}),w.a.post("".concat(v.backend_url,"/profile/editUserInfo"),r).then((function(e){a.setState({userInfo:r}),console.log(e)})).catch((function(e){console.warn(e)}));case 7:case"end":return e.stop()}}),e)}))),a.favorite=function(){a.state.liked?w.a.post("".concat(v.backend_url,"/games/IncOrDecLikes?id=").concat(a.gid,"&inc=false")).then((function(e){a.setState({likes:a.state.likes-1}),console.log(e)})).catch((function(e){console.warn(e)})):w.a.post("".concat(v.backend_url,"/games/IncOrDecLikes?id=").concat(a.gid,"&inc=true")).then((function(e){a.setState({likes:a.state.likes+1}),console.log(e)})).catch((function(e){console.warn(e)})),a.setState({liked:!a.state.liked})},a.state={apiResponse:{},apiScreenshots:[],apiAges:{},apiGenre:[],apiPlatforms:{},coverUrl:"",hosting:!1,hosts:[],liked:!1,likes:0,hostData:{},userInfo:{},userHosting:[],userFavorites:[]},a.next=a.next.bind(Object(K.a)(a)),a.previous=a.previous.bind(Object(K.a)(a)),a.carousel=r.a.createRef(),a.gid=Se.parse(a.props.location.search).id,a.hostCards=[],a.genreIds=[],a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"next",value:function(){this.carousel.next()}},{key:"previous",value:function(){this.carousel.prev()}},{key:"convertDate",value:function(e){return new Date(e).toDateString().split(" ").slice(1).join(" ")}},{key:"getGame",value:function(){var e=this,t="http://localhost:9000/igdb/game?id="+this.gid;fetch(t).then((function(e){return e.json()})).then((function(t){e.setState({apiResponse:t,apiScreenshots:t.screenshots,apiGenre:t.genres,apiPlatforms:t.platforms[0][0]}),t.screenshots&&e.setState({apiScreenshots:t.screenshots}),t.age_ratings&&e.setState({apiAges:t.age_ratings[0][0]}),e.state.apiGenre.map((function(t){e.genreIds.push(t[0].id)}));var a={genres:e.genreIds};w.a.post("".concat(v.backend_url,"/profile/incrementGenreHistory"),a).then((function(e){console.log(e)})).catch((function(e){console.warn(e)}))})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"getHost",value:function(e){var t=this;w.a.get("".concat(v.backend_url,"/profile/getProfileUserInformation?id=").concat(e)).then((function(a){console.log("Adding host data"),console.log(a.data),t.setState({hostData:a.data}),t.hostCards.push({id:e,pic:a.data.profilePicture,name:a.data.username}),console.log(t.hostCards)})).catch((function(e){return console.warn(e)}))}},{key:"cover",value:function(){var e=this,t="http://localhost:9000/igdb/cover?id="+this.gid;fetch(t).then((function(e){return e.text()})).then((function(t){return e.setState({coverUrl:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"initialize",value:function(){var e=this,t="".concat(v.backend_url,"/games/getGameInfo?id=").concat(this.gid);fetch(t).then((function(e){return e.json()})).then((function(t){e.checkHost(t.hosts),e.setState({likes:t.likes,userHosting:t.hosts}),console.log(t),e.state.userHosting.map((function(t){console.log("Processing host "+t),e.getHost(t)}))})).catch((function(e){return console.warn(e)})),w.a.get("".concat(v.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.setState({userInfo:t.data,userFavorites:t.data.favorites}),e.checkFavorite()})).catch((function(e){return console.warn(e)}))}},{key:"checkHost",value:function(e){this.setState({hosts:e});var t=this.props.user._id;e.indexOf(t)>-1&&(this.state.hosting=!0),console.log(this.state.hosts),console.log("Hosting is "+this.state.hosting)}},{key:"checkFavorite",value:function(){this.state.userFavorites.indexOf(this.gid)>-1&&(this.setState({liked:!0}),console.log("User has liked this game"))}},{key:"componentDidMount",value:function(){this.initialize(),console.log("Hosts are"+this.state.userHosting),this.getGame(),this.cover()}},{key:"render",value:function(){var e=this;return r.a.createElement(ke,null,r.a.createElement(oe.a,null,r.a.createElement(ce.a,{span:8,alignItems:"top"},r.a.createElement("div",{class:"container"},r.a.createElement("img",{height:"375",width:"260",src:"http://"+this.state.coverUrl}),r.a.createElement("br",null),r.a.createElement("div",{class:"small-container"},this.props.user?r.a.createElement(be.a,{character:r.a.createElement(g.a,{type:"heart"}),count:1,value:this.state.liked,onChange:this.favorite}):r.a.createElement(be.a,{disabled:!0,character:r.a.createElement(g.a,{type:"heart"}),count:1}),r.a.createElement("span",null,this.state.likes)),r.a.createElement("br",null),r.a.createElement(P.a,{title:"Where To Play",style:{width:300}},!!this.hostCards&&this.hostCards.map((function(t){if(t.id!=e.state.userInfo._id)return console.log("Displaying host "+t),r.a.createElement("div",{align:"center"},r.a.createElement(h.b,{to:"/profile/?id=".concat(t.id)},r.a.createElement("img",{className:"host-image",src:t.pic}),r.a.createElement(ve.a,null,t.name)))}))))),r.a.createElement(ce.a,{span:8},r.a.createElement("div",{class:"container"},r.a.createElement(Ie,null,this.state.apiResponse.name),r.a.createElement("br",null),r.a.createElement(ye,null,this.state.apiResponse.summary),r.a.createElement("br",null),r.a.createElement(Ie,{level:2},"Screencap")),r.a.createElement("br",null),r.a.createElement(oe.a,{type:"flex",justify:"space-around",align:"middle"},r.a.createElement(ce.a,{span:2},r.a.createElement(H.a,{className:"arrow-left",icon:"left-circle",onClick:this.previous})),r.a.createElement(ce.a,{span:20},r.a.createElement(B.a,Object.assign({class:"carousel",ref:function(t){return e.carousel=t}},{dots:!0,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1}),!!this.state.apiScreenshots&&this.state.apiScreenshots.map((function(e){return r.a.createElement("div",{align:"center",className:"carousel-container"},r.a.createElement("img",{className:"image-container",src:"http:"+e[0].url.replace("t_thumb","t_720p")}))})))),r.a.createElement(ce.a,{span:2},r.a.createElement(H.a,{className:"arrow-right",icon:"right-circle",onClick:this.next})))),r.a.createElement(ce.a,{span:8},r.a.createElement("div",{class:"container"},this.props.user?this.state.hosting?r.a.createElement(I.a,{onClick:this.unhostGame},"Stop Hosting"):r.a.createElement(I.a,{onClick:this.hostGame},"Host"):r.a.createElement("a",{href:"".concat(v.backend_url,"/auth/facebook")},r.a.createElement(I.a,null,"Log in with Facebook")),r.a.createElement("br",null),r.a.createElement(P.a,{title:"Details",style:{width:350}},r.a.createElement(Ee.a,null,r.a.createElement(Ee.a.Item,{label:"platform"},this.state.apiPlatforms.name),r.a.createElement(Ee.a.Item,{label:"version"},this.state.apiPlatforms.versions),r.a.createElement(Ee.a.Item,{label:"release date"},this.convertDate(1e3*this.state.apiResponse.first_release_date)),r.a.createElement(Ee.a.Item,{label:"rating"},this.state.apiResponse.rating_count),r.a.createElement(Ee.a.Item,{label:"suitable for"},this.state.apiAges.synopsis)),r.a.createElement("div",{class:"small-container"},this.state.apiGenre.map((function(e){return r.a.createElement(ve.a,null,e[0].name)}))))))))}}]),t}(r.a.Component),Oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:null},a.setUser=function(e){console.log(e),a.setState({user:e})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.user),r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement(k,{user:this.state.user}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(j,Object.assign({setUser:e.setUser,user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/inbox",render:function(t){return r.a.createElement(L,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/messages",render:function(t){return r.a.createElement(L,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/games",render:function(t){return r.a.createElement(de,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/people",render:function(t){return r.a.createElement(pe,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/singlegame",render:function(t){return r.a.createElement(we,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/profile",render:function(t){return r.a.createElement(se,Object.assign({setUser:e.setUser,user:e.state.user},t))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[269,1,2]]]);
//# sourceMappingURL=main.67ee9214.chunk.js.map