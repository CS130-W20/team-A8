(this.webpackJsonpgamelinks=this.webpackJsonpgamelinks||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"url":"http://localhost:3000","backend_url":"http://localhost:9000"}')},276:function(e,t,a){e.exports=a(578)},281:function(e,t,a){},402:function(e,t){},502:function(e,t,a){},568:function(e,t,a){},570:function(e,t,a){},577:function(e,t,a){},578:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),o=a.n(s),c=(a(281),a(29)),l=a(30),i=a(34),u=a(31),m=a(33),f=a(23),d=a(77),h=(a(159),a(154)),p=(a(86),a(4)),g=(a(122),a(13)),E=(a(87),a(27)),v=(a(88),a(38)),b=v.a.Search,k=E.a.Title,I=function(e){console.log(e.user);var t=r.a.createElement(g.a,null,r.a.createElement(g.a.Item,null,r.a.createElement(f.c,{to:"/people"},"hosts")),r.a.createElement(g.a.Item,null,r.a.createElement(f.c,{to:"/profile?id=".concat(e.user?e.user._id:void 0)},"profile")),r.a.createElement(g.a.Item,null,r.a.createElement(f.c,{to:"/inbox"},"inbox")));return r.a.createElement("div",{style:{width:"100%",backgroundColor:"#041527"}},r.a.createElement("div",{style:{width:"calc(100% - 250px)"}},r.a.createElement(k,{style:{float:"left",color:"white",position:"absolute",left:"10px",top:"16px"},level:4},"GAMELINKS"),r.a.createElement(g.a,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"},align:"right"},r.a.createElement(g.a.Item,{key:"0"},r.a.createElement(f.c,{to:"/"},r.a.createElement(p.a,{type:"home"}))),r.a.createElement(g.a.Item,{key:"1"},r.a.createElement(h.a,{overlay:t},r.a.createElement("a",{className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"people",r.a.createElement(p.a,{type:"down"})))),r.a.createElement(g.a.Item,{key:"2"},r.a.createElement(f.c,{to:"/games"},"games")),r.a.createElement(g.a.Item,{key:"3"},r.a.createElement(f.c,{to:"/lists"},"lists")))),r.a.createElement(b,{placeholder:"search",onSearch:function(e){return console.log(e)},style:{width:200,right:"10px",top:"16px",position:"absolute"}}))},y=(a(65),a(19)),O=(a(94),a(43)),w=a(15),S=a(21),C=a.n(S),j=O.a.Content,x=E.a.Title,P=(E.a.Text,function(e){function t(){return Object(c.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(w.backend_url,"/profile/getCurrentUserInformation")).then((function(t){t||e.props.setUser(null)}))}},{key:"render",value:function(){return console.log(this.props.user),r.a.createElement(j,{style:{padding:"0 50px",marginTop:64}},r.a.createElement(x,{type:"secondary"},"show off your stats."),r.a.createElement("br",null),r.a.createElement(x,{type:"secondary"},"connect and join with hosts."),r.a.createElement("br",null)," ",r.a.createElement(x,{type:"secondary"},"share what's good."),r.a.createElement("br",null),r.a.createElement("div",{align:"center"},this.props.user?r.a.createElement("a",{href:"".concat(w.backend_url,"/auth/logout")},r.a.createElement(y.a,null,"Log Out")):r.a.createElement("a",{href:"".concat(w.backend_url,"/auth/facebook")},r.a.createElement(y.a,null,"Log in with Facebook"))))}}]),t}(r.a.Component)),_=(a(223),a(119)),M=(a(579),a(272)),N=(a(261),a(118)),H=(a(373),a(156)),T=(a(176),a(57)),A=a(273),U=a(22),R=a.n(U),F=a(47),G=a(41),z=a(192),D=a.n(z),L=(a(406),v.a.Search),B=(v.a.TextArea,O.a.Content),V=O.a.Sider,q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onReceiveMessage=function(){var e=Object(G.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(F.a)({},a.state.userID,{value:t}),a.state.title="Receive Message",e.next=4,C.a.post("".concat(w.backend_url,"/messaging/addToChatHistory"),t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){console.log(e),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.onChange=function(e){a.setState({message:e.target.value})},a.handleEnter=function(e){a.onSendMessage(a.state.message),a.setState({message:""})},a.state={apiResponse:[],messages:[],message:"",username:"",partner:"",title:"",visible:!1},a.socket=D()("localhost:9000"),a.socket.on("RECEIVE_MESSAGE",(function(e){this.addMessage(e)})),a.addMessage=function(e){console.log("In add message"),console.log(e),a.setState({messages:[].concat(Object(A.a)(a.state.messages),[e])}),console.log(a.state.messages)},a.sendMessage=function(e){console.log("Sending message"),a.setState({partner:"5e62c499cb2728634289d6ab"}),a.socket.emit("SEND_MESSAGE",{author:a.state.username,user:a.state.partner,message:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"connect",value:function(){var e=this;this.state.title="Connect",fetch("".concat(w.backend_url,"/messaging/connectSocketIO")).then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"inbox",value:function(){var e=this;this.state.title="Inbox",fetch("".concat(w.backend_url,"/messaging/inbox")).then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"getChat",value:function(e){var t=this;return this.state.title="Chat",fetch("".concat(w.backend_url,"/messaging/getChatHistory?id=").concat(e)).then((function(e){return e.json()})).then((function(e){return t.setState({messages:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"onSendMessage",value:function(e){var t=this,a={author:this.props.user.firstName,user:this.state.partner,message:e};this.addMessage(a),this.sendMessage(e),this.state.title="Send Message",console.log("In onSendMessage"),console.log(e);var n=JSON.stringify({userID1:this.props.user._id,userID2:"5e62c499cb2728634289d6ab",message:a});console.log(n),fetch("".concat(w.backend_url,"/messaging/addToChatHistory"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:n}).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is ".concat(e))}))}},{key:"componentDidMount",value:function(){this.connect(),this.inbox()}},{key:"render",value:function(){var e=this,t=this.state;t.visible,t.loading;return r.a.createElement(f.a,null,r.a.createElement(O.a,{style:{minHeight:"90vh"}},r.a.createElement(V,null,r.a.createElement(T.a,{size:64,icon:"user"}),r.a.createElement(g.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["3"]},r.a.createElement(g.a.Item,{key:"1"},r.a.createElement(p.a,{type:"export"}),r.a.createElement("span",{className:"nav-text"},"refer host")),r.a.createElement(g.a.Item,{key:"2"},r.a.createElement(p.a,{type:"home"}),r.a.createElement("span",{className:"nav-text"},"reservations")),r.a.createElement(g.a.Item,{key:"3"},r.a.createElement(p.a,{type:"upload"}),r.a.createElement("span",{className:"nav-text"},"inbox")),r.a.createElement(g.a.Item,{key:"4"},r.a.createElement(f.c,{to:"/profile#/profile?id=undefined"},r.a.createElement(p.a,{type:"user"}),"back to profile")))),r.a.createElement(O.a,null,r.a.createElement(B,{style:{margin:"0 16px"}},r.a.createElement(H.a,{style:{margin:"16px 0"}},r.a.createElement(H.a.Item,null,"Inbox"),r.a.createElement(H.a.Item,null,"User")),r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:475}},r.a.createElement("div",{className:"scrollable-container",ref:function(t){e.container=t}},this.state.apiResponse.map((function(t){return r.a.createElement("div",{className:"p1"},r.a.createElement(N.a,{hoverable:!0,title:t.name},r.a.createElement(y.a,{size:"large",onClick:function(){e.showModal(),e.getChat(t.id)}},"Message")),r.a.createElement(_.a,{visible:e.state.visible,title:t.name,onOk:e.handleOk,onCancel:e.handleCancel,footer:[r.a.createElement(y.a,{key:"back",onClick:e.handleCancel},"Return")]},r.a.createElement(M.a,{size:"large"},e.state.messages.map((function(e){return r.a.createElement("div",null,e.author,": ",e.message)}))),r.a.createElement(L,{size:"large",placeholder:"Enter here",value:e.state.message||"",enterButton:"Send",onChange:e.onChange,onPressEnter:e.handleEnter})))}))))))))}}]),t}(r.a.Component),J=(a(135),a(67)),W=(a(580),a(271)),K=(a(128),a(48)),Q=a(151),Y=(a(421),a(199)),Z=a(36),$=(a(423),a(60)),X=a(200),ee=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleAdditionalInfoOk=function(){var e=Object(G.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a.props.form.validateFields((function(e,t){e||a.props.setAddInfo(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,a,n,s,o=this.props.form.getFieldDecorator,c=this.props.user.address?this.props.user.address.split(","):["","","","",""];if(5==c.length){var l=Object(X.a)(c,5);e=l[0],t=l[1],a=l[2],n=l[3],s=l[4]}else{var i=Object(X.a)(c,4);e=i[0],a=i[1],n=i[2],s=i[3]}return r.a.createElement($.a,{name:"addInfo-form",onSubmit:this.handleAdditionalInfoOk},r.a.createElement($.a.Item,{label:"Username"},o("username",{rules:[{required:!0,message:"Please input your username"}],initialValue:this.props.user.username})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"Address Line 1"},o("addr1",{rules:[{required:!0,message:"Please input an Address"}],initialValue:e})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"Address Line 2"},o("addr2",{initialValue:t})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"City"},o("city",{rules:[{required:!0,message:"Please input a city"}],initialValue:a})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"State"},o("state",{rules:[{required:!0,message:"Please input a state"}],initialValue:n})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"Zip Code"},o("zip",{rules:[{required:!0,message:"Please input a zip code"}],initialValue:s})(r.a.createElement(v.a,null))),r.a.createElement($.a.Item,{label:"Bio"},o("bio",{rules:[{required:!0,message:"Please write a short description about yourself"}],initialValue:this.props.user.bio})(r.a.createElement(v.a.TextArea,{rows:4}))),r.a.createElement($.a.Item,null,r.a.createElement(y.a,{type:"primary",htmlType:"submit"},"Ok")))}}]),t}(r.a.Component),te=$.a.create({name:"addInfoForm"})(ee),ae=a(113),ne=a.n(ae),re=(a(502),E.a.Title),se=E.a.Text,oe=E.a.Paragraph,ce=(O.a.Content,function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={userId:null,isProfileOwner:!1,showProfileModal:!1,showAdditionalInfoModal:!1},a.onUsernameEdit=function(e){var t=Object(F.a)({},a.state.userInfo,{username:e});C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),t).then((function(e){a.setState({userInfo:t})})).catch((function(e){Y.a.error("A user with this username already exists. Please choose another.")}))},a.onBioEdit=function(){var e=Object(G.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(F.a)({},a.state.userInfo,{bio:t}),a.setState({userInfo:n}),e.next=4,C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeCard=function(){var e=Object(G.a)(R.a.mark((function e(t,n){var r,s,o,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("removing card"),s=a.state.userInfo[t].filter((function(e,t,a){return e!==n.toString()||(r=t,!1)})),(o=a.state[t]).splice(2*r,2),(c=Object(F.a)({},a.state.userInfo))[t]=s,console.log(s),a.setState(Object(Q.a)({userInfo:c},t,o)),e.next=10,C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),c);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.openProfileModal=function(){a.setState({showProfileModal:!0})},a.openAdditionalInfoModal=function(){a.setState({showAdditionalInfoModal:!0})},a.closeAdditionalInfoModal=function(){a.setState({showAdditionalInfoModal:!1})},a.handleProfileModalCancel=function(){a.setState({showProfileModal:!1})},a.handleProfileModalOk=function(){var e=Object(G.a)(R.a.mark((function e(t){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log("handleok"),a.state.newProfilePicture?((n=new FormData).append("myImage",a.state.newProfilePicture),a.setState({newProfilePicture:void 0}),r={headers:{"content-type":"multipart/form-data"}},C.a.post("".concat(w.backend_url,"/profile/editProfilePicture"),n,r).then((function(e){a.setState({showProfileModal:!1})}))):a.setState({showProfileModal:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setAddInfo=function(){var e=Object(G.a)(R.a.mark((function e(t){var n,r,s,o,c,l,i,u,m;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),n=t.username,r=t.addr1,s=t.addr2,o=t.city,c=t.state,l=t.zip,i=t.bio,u=s?"".concat(r,", ").concat(s,", ").concat(o,", ").concat(c,", ").concat(l):"".concat(r,", ").concat(o,", ").concat(c,", ").concat(l),m=Object(F.a)({},a.state.userInfo,{address:u,username:n,city:o,bio:i}),C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),m).then((function(){a.setState({userInfo:m,showAdditionalInfoModal:!1})})).catch((function(){Y.a.error("A user with this username already exists. Please choose another.")}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getGameList=function(){var e=Object(G.a)(R.a.mark((function e(t){var n,s,o,c,l,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.userInfo&&a.state.userInfo[t]){e.next=2;break}return e.abrupt("return",r.a.createElement(K.a,null));case 2:for(n=a.state.userInfo[t],s=[],o=0;o<n.length;o+=1)c=C.a.get("".concat(w.backend_url,"/igdb/game?id=").concat(n[o])),l=C.a.get("".concat(w.backend_url,"/igdb/cover?id=").concat(n[o])),s.push(c,l);return e.next=7,Promise.all(s);case 7:i=e.sent,"hosting"===t?a.setState({hosting:i}):a.setState({favorites:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.setNewProfilePicture=function(e){var t=e.file,n=e.onSuccess;a.setState({newProfilePicture:t}),console.log(a.state.newProfilePicture),setTimeout((function(){n("ok")}),0)},a.handleUploadChange=function(e){var t=[e.fileList];a.setState({fileList:t[0]})},a.nextHosting=a.nextHosting.bind(Object(Z.a)(a)),a.prevHosting=a.prevHosting.bind(Object(Z.a)(a)),a.nextFavorites=a.nextFavorites.bind(Object(Z.a)(a)),a.prevFavorites=a.prevFavorites.bind(Object(Z.a)(a)),a.setNewProfilePicture=a.setNewProfilePicture.bind(Object(Z.a)(a));var n=ne.a.parse(e.location.search);return a.state.userId=n.id,a.carouselHosting=r.a.createRef(),a.carouselFavorites=r.a.createRef(),console.log(e),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(w.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.props.setUser(t.data)})).then((function(){return C()({url:"".concat(w.backend_url,"/profile/getProfileUserInformation?id=").concat(e.state.userId),method:"GET"})})).then((function(t){return e.setState({userInfo:t.data}),e.props.user&&(e.setState({isProfileOwner:t.data._id===e.props.user._id}),e.props.user.latitude&&e.props.user.longitude)?C()({url:"".concat(w.backend_url,"/profile/distance?lat=").concat(e.props.user.latitude,"&long=").concat(e.props.user.longitude),method:"GET"}):null})).then((function(t){t&&e.setState({distance:t.data.distance.toString()})})).then((function(){console.log(e.state.userInfo),!e.state.isProfileOwner||e.state.userInfo.username&&e.state.userInfo.bio&&(e.state.userInfo.address||e.state.userInfo.city)||e.setState({showAdditionalInfoModal:!0})})).then((function(){e.getGameList("hosting")})).then((function(){e.getGameList("favorites"),console.log(e.state)})).catch((function(e){console.log(e)}))}},{key:"nextHosting",value:function(){this.carouselHosting.next()}},{key:"prevHosting",value:function(){this.carouselHosting.prev()}},{key:"nextFavorites",value:function(){this.carouselFavorites.next()}},{key:"prevFavorites",value:function(){this.carouselFavorites.prev()}},{key:"render",value:function(){var e=this,t=function(t){console.log("creatingCards");var a=e.state[t];if(a){for(var n=[],s=function(s){n.push(r.a.createElement("div",{className:"card",key:s},r.a.createElement(f.c,{to:"/singlegame/?id=".concat(a[s].data.id)},r.a.createElement("img",{src:"http://"+a[s+1].data})),r.a.createElement("div",{className:"name-text-box"},r.a.createElement("span",{className:"name-text"},a[s].data.name),r.a.createElement("br",null),e.state.isProfileOwner&&r.a.createElement(se,{className:"name-text",style:{cursor:"pointer"},onClick:function(){e.removeCard(t,a[s].data.id)}},"Remove"))))},o=0;o<a.length;o+=2)s(o);return n}},a=t("hosting")||[],n=t("favorites")||[],s={dots:!0,speed:500,circular:!1,slidesToScroll:4};return r.a.createElement("div",{id:"main"},r.a.createElement(_.a,{title:"Please add some additional Information",visible:this.state.showAdditionalInfoModal,footer:[]},r.a.createElement(se,null,"Other users will only be able to see the City you are in. You can choose to share your full address with other users."),r.a.createElement(te,{setAddInfo:this.setAddInfo,user:this.props.user})),r.a.createElement(_.a,{title:"Change Profile Picture",visible:this.state.showProfileModal,onCancel:this.handleProfileModalCancel,footer:[r.a.createElement(y.a,{key:"cancel",onClick:this.handleProfileModalCancel},"Cancel"),r.a.createElement(y.a,{key:"submit",form:"profile-form",htmlType:"submit"},"Ok")]},r.a.createElement("form",{id:"profile-form",onSubmit:this.handleProfileModalOk},r.a.createElement(W.a.Dragger,{name:"file",multiple:!1,customRequest:this.setNewProfilePicture,onChange:this.handleUploadChange,accept:"image/*",fileList:this.state.fileList},r.a.createElement("p",{className:"ant-upload-text"},"Click or drag a picture")))),r.a.createElement("div",{className:"user_info"},(!this.state.userInfo||!this.state.userInfo.profilePicture)&&r.a.createElement(p.a,{style:{fontSize:"150px"},type:"user"}),this.state.userInfo&&this.state.userInfo.profilePicture&&r.a.createElement("div",null,r.a.createElement("img",{className:"profile_image",src:this.state.userInfo.profilePicture})),this.state.isProfileOwner&&r.a.createElement(se,{id:"change_profile_pic",onClick:this.openProfileModal},"Change Profile Picture"),r.a.createElement("div",{id:"name_and_loc"},r.a.createElement("div",{id:"name"},this.state.userInfo&&this.state.userInfo.username&&(this.state.isProfileOwner?r.a.createElement(re,{editable:{onChange:this.onUsernameEdit}},this.state.userInfo.username):r.a.createElement(re,null,this.state.userInfo.username))),r.a.createElement("br",null),r.a.createElement("div",{id:"loc"},this.state.userInfo&&this.state.userInfo.address?r.a.createElement(re,{level:3},this.state.userInfo.address):this.state.userInfo?r.a.createElement(re,{level:3},this.state.userInfo.city):r.a.createElement(r.a.Fragment,null)),this.state.distance&&r.a.createElement(se,{id:"distance"},this.state.distance," miles away")),this.state.isProfileOwner&&r.a.createElement(y.a,{type:"primary",id:"edit",onClick:this.openAdditionalInfoModal},"Edit profile")),r.a.createElement("hr",null),r.a.createElement("div",{id:"hosting"},r.a.createElement(re,{level:2},"Games Hosting"),r.a.createElement("hr",null),r.a.createElement("div",{className:"games_list"},r.a.createElement("div",{className:"games_list_children"},a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"games_list_carousel"},r.a.createElement(J.a,Object.assign({ref:function(t){return e.carouselHosting=t}},s,{slidesToShow:Math.min(4,a.length)}),a)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(p.a,{type:"left-circle",className:"scroll",onClick:this.prevHosting}),r.a.createElement(p.a,{type:"right-circle",className:"scroll",onClick:this.nextHosting}))):r.a.createElement(K.a,null))),r.a.createElement(re,{level:2},"Favorites"),r.a.createElement("hr",null),r.a.createElement("div",{className:"games_list"},r.a.createElement("div",{className:"games_list_children"},n.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"games_list_carousel"},r.a.createElement(J.a,Object.assign({ref:function(t){return e.carouselFavorites=t}},s,{slidesToShow:Math.min(4,n.length)}),n)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(p.a,{type:"left-circle",className:"scroll",onClick:this.prevFavorites}),r.a.createElement(p.a,{type:"right-circle",className:"scroll",onClick:this.nextFavorites}))):r.a.createElement(K.a,null)))),r.a.createElement("div",{id:"bio"},r.a.createElement("div",{id:"bio_title"},r.a.createElement(re,{level:3},"bio")),r.a.createElement("div",{id:"bio_info"},this.state.userInfo&&this.state.userInfo.bio&&(this.state.isProfileOwner?r.a.createElement(oe,{ellipsis:{rows:5,expandable:!0},editable:{onChange:this.onBioEdit}},this.state.userInfo.bio):r.a.createElement(oe,{ellipsis:{rows:5,expandable:!0}},this.state.userInfo.bio))),r.a.createElement(f.c,{to:"/messages?id=".concat(this.state.userId)},r.a.createElement(re,{level:3},r.a.createElement(p.a,{type:"mail"})," Message this host"))))}}]),t}(r.a.Component)),le=(a(174),a(58)),ie=(a(175),a(24)),ue=(a(568),g.a.SubMenu),me=(O.a.Content,v.a.Search),fe=E.a.Title,de=E.a.Text,he=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).genre_filter=r.a.createElement(g.a,null,r.a.createElement(ue,{title:"A-I"},r.a.createElement(g.a.Item,{onClick:function(){return a.genre("adventure")}},"Adventure"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("arcade")}},"Arcade"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("fighting")}},"Fighting"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("hack-and-slash-beat-em-up")}},"Hack-and-Slash / Beat-Em-Up"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("indie")}},"Indie")),r.a.createElement(ue,{title:"M-P"},r.a.createElement(g.a.Item,{onClick:function(){return a.genre("music")}},"Music"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("pinball")}},"Pinball"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("platform")}},"Platform"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("point-and-click")}},"Point-and-Click"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("puzzle")}},"Puzzle")),r.a.createElement(ue,{title:"Q-R"},r.a.createElement(g.a.Item,{onClick:function(){return a.genre("quiz-trivia")}},"Quiz / Trivia"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("racing")}},"Racing"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("real-time-strategy-rts")}},"RTS"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("role-playing-rpg")}},"RPG")),r.a.createElement(ue,{title:"S"},r.a.createElement(g.a.Item,{onClick:function(){return a.genre("shooter")}},"Shooter"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("simulator")}},"Simulator"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("sport")}},"Sport"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("strategy")}},"Strategy")),r.a.createElement(ue,{title:"T-V"},r.a.createElement(g.a.Item,{onClick:function(){return a.genre("tactical")}},"Tactical"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("turn-based-strategy-tbs")}},"Turn-Based"),r.a.createElement(g.a.Item,{onClick:function(){return a.genre("visual-novel")}},"Visual-Novel"))),a.next=a.next.bind(Object(Z.a)(a)),a.previous=a.previous.bind(Object(Z.a)(a)),a.carousel=r.a.createRef(),a.limit="50",a.state={apiResponse:[],title:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"next",value:function(){this.carousel.next()}},{key:"previous",value:function(){this.carousel.prev()}},{key:"search",value:function(e){var t=this;this.state.title='Search for: "'.concat(e,'"'),fetch("".concat(w.backend_url,"/igdb/search?title=").concat(e)).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"popular",value:function(){var e=this;this.state.title="Most Popular",fetch("".concat(w.backend_url,"/igdb/popular?limit=").concat(this.limit)).then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"genre",value:function(e){var t=this;this.state.title='Genre: "'.concat(e,'"'),fetch("".concat(w.backend_url,"/igdb/searchbyGenre?genre=").concat(e,"&limit=").concat(this.limit)).then((function(e){return e.json()})).then((function(e){return t.setState({apiResponse:e})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"componentDidMount",value:function(){this.popular()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(le.a,null,r.a.createElement(ie.a,{span:18},r.a.createElement("div",null,r.a.createElement(de,null,"Browse By "),r.a.createElement(y.a,{onClick:function(){return e.popular()}},"popular"),r.a.createElement(h.a,{overlay:this.genre_filter},r.a.createElement(y.a,null,"genre ",r.a.createElement(p.a,{type:"down"}))))),r.a.createElement(ie.a,{span:6},r.a.createElement(me,{placeholder:"Search by Name",onSearch:function(t){return e.search(t)}}))),r.a.createElement("br",null),r.a.createElement(fe,null,this.state.title),r.a.createElement(J.a,Object.assign({class:"carousel",ref:function(t){return e.carousel=t}},{dots:!0,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:6}),this.state.apiResponse.map((function(e){return r.a.createElement("div",{className:"image-container"},r.a.createElement(f.c,{to:"/singlegame/?id=".concat(e.id)},r.a.createElement("img",{className:"elem-image",src:"http://"+e.coverUrl})),r.a.createElement("div",{className:"name-text-box"},r.a.createElement("p",{className:"name-text"},e.name)))}))),r.a.createElement(T.a,{className:"arrow-left",size:"large",icon:"left-circle",onClick:this.previous}),r.a.createElement(T.a,{className:"arrow-right",size:"large",icon:"right-circle",onClick:this.next}))}}]),t}(r.a.Component),pe=(a(569),a(570),E.a.Title),ge=E.a.Text,Ee=(E.a.Paragraph,O.a.Content,function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={userId:null},a.getHostList=function(){var e=Object(G.a)(R.a.mark((function e(t){var n,s,o,c,l;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.userInfo){e.next=2;break}return e.abrupt("return",r.a.createElement(K.a,null));case 2:for(n=a.state.userInfo[t],s=[],o=0;o<n.length;o+=1)c=C.a.get("".concat(w.backend_url,"/profile/getProfileUserInformation?id=").concat(n[o])),s.push(c);return e.next=7,Promise.all(s);case 7:l=e.sent,a.setState({hosts:l});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getGameList=function(){var e=Object(G.a)(R.a.mark((function e(t){var n,s,o,c,l,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.state.userInfo&&a.state.userInfo[t]){e.next=2;break}return e.abrupt("return",r.a.createElement(K.a,null));case 2:for(n=a.state.userInfo[t],s=[],o=0;o<n.length;o+=1)c=C.a.get("".concat(w.backend_url,"/igdb/game?id=").concat(n[o])),l=C.a.get("".concat(w.backend_url,"/igdb/cover?id=").concat(n[o])),s.push(c,l);return e.next=7,Promise.all(s);case 7:i=e.sent,"hosting"===t?a.setState({hosting:i}):a.setState({favorites:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.nextHosting=a.nextHosting.bind(Object(Z.a)(a)),a.prevHosting=a.prevHosting.bind(Object(Z.a)(a));var n=ne.a.parse(e.location.search);return a.state.userId=n.id,a.carouselHosting=r.a.createRef(),console.log(e),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(w.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.props.setUser(t.data)})).then((function(){return C()({url:"".concat(w.backend_url,"/profile/getProfileUserInformation?id=").concat(e.state.userId),method:"GET"})})).then((function(t){console.log(t.data._id),e.setState({userInfo:t.data})})).then((function(){e.getHostList(e.state.userInfo.data.city)})).catch((function(e){console.log(e)}))}},{key:"nextHosting",value:function(){this.carouselHosting.next()}},{key:"prevHosting",value:function(){this.carouselHosting.prev()}},{key:"render",value:function(){var e=this,t=function(t){console.log("creatingHostCards");var a=e.state[t];if(a){for(var n=[],s=0;s<a.length;s+=2)n.push(r.a.createElement("div",{className:"card"},r.a.createElement(f.c,{to:"/profile/?id=".concat(a[s].data.id)},r.a.createElement("img",{src:"/profile/?id=".concat(a[s].data.profilePicture)}))));return n}}("hosts")||[];!function(t){console.log("creatingGameCards");var a=e.state[t];if(a){for(var n=[],s=function(s){n.push(r.a.createElement("div",{className:"card"},r.a.createElement(f.c,{to:"/singlegame/?id=".concat(a[s].data.id)},r.a.createElement("img",{src:"http://"+a[s+1].data})),r.a.createElement("div",{className:"name-text-box"},r.a.createElement("a",{className:"name-text"},a[s].data.name),r.a.createElement("br",null),e.state.isProfileOwner&&r.a.createElement(ge,{className:"name-text",style:{cursor:"pointer"},onClick:function(){e.removeCard(t,a[s].data.id)}},"Remove"))))},o=0;o<a.length;o+=2)s(o)}}("hosting");return r.a.createElement("div",null,r.a.createElement(pe,{level:2},"Hosts for You"),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement("div",null,t.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(J.a,Object.assign({ref:function(t){return e.carouselHosting=t}},{dots:!0,speed:500,circular:!1,slidesToScroll:4},{slidesToShow:Math.min(4,t.length)}),t)),r.a.createElement("br",null),r.a.createElement("div",{className:"scroll-group"},r.a.createElement(p.a,{type:"left-circle",className:"scroll",onClick:this.prevHosting}),r.a.createElement(p.a,{type:"right-circle",className:"scroll",onClick:this.nextHosting}))):r.a.createElement(K.a,null))))}}]),t}(r.a.Component)),ve=(a(571),a(274)),be=(a(573),a(85)),ke=(a(575),a(198)),Ie=(n.Component,a(577),O.a.Content),ye=(v.a.Search,E.a.Title),Oe=E.a.Text,we=a(113),Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).hostGame=Object(G.a)(R.a.mark((function e(){var t,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user._id,n=a.gid,console.log("Adding Host for game "+n+" for user "+t),e.next=5,C.a.post("".concat(w.backend_url,"/games/addHost"),null,{params:{id:n,userId:t}}).then((function(e){a.setState({hosting:!0}),console.log(e)})).catch((function(e){return console.warn(e)}));case 5:r=Object(F.a)({},a.state.userInfo,{hosting:{id:n,operation:"add"}}),C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),r).then((function(e){a.setState({userInfo:r}),console.log(e)})).catch((function(e){console.warn(e)}));case 7:case"end":return e.stop()}}),e)}))),a.unhostGame=Object(G.a)(R.a.mark((function e(){var t,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.user._id,n=a.gid,console.log("Removing Host for game "+n+" for user "+t),e.next=5,C.a.post("".concat(w.backend_url,"/games/removeHost"),null,{params:{id:n,userId:t}}).then((function(e){a.setState({hosting:!1}),console.log(e)})).catch((function(e){return console.warn(e)}));case 5:r=Object(F.a)({},a.state.userInfo,{hosting:{id:n,operation:"remove"}}),C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),r).then((function(e){a.setState({userInfo:r}),console.log(e)})).catch((function(e){console.warn(e)}));case 7:case"end":return e.stop()}}),e)}))),a.favorite=function(){var e=a.gid;if(a.state.liked){var t=Object(F.a)({},a.state.userInfo,{favorites:{id:e,operation:"remove"}});C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),t).then((function(e){a.setState({userInfo:t}),console.log(e)})).catch((function(e){console.warn(e)}))}else{var n=Object(F.a)({},a.state.userInfo,{favorites:{id:e,operation:"add"}});C.a.post("".concat(w.backend_url,"/profile/editUserInfo"),n).then((function(e){a.setState({userInfo:n}),console.log(e)})).catch((function(e){console.warn(e)}))}a.setState({liked:!a.state.liked})},a.state={apiResponse:{},apiScreenshots:[],apiAges:{},apiGenre:[],apiPlatforms:{},coverUrl:"",hosting:!1,hosts:[],liked:!1,likes:"",userInfo:{},userHosting:[],userFavorites:[]},a.next=a.next.bind(Object(Z.a)(a)),a.previous=a.previous.bind(Object(Z.a)(a)),a.carousel=r.a.createRef(),a.gid=we.parse(a.props.location.search).id,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"next",value:function(){this.carousel.next()}},{key:"previous",value:function(){this.carousel.prev()}},{key:"convertDate",value:function(e){return new Date(e).toDateString().split(" ").slice(1).join(" ")}},{key:"getGame",value:function(){var e=this,t="http://localhost:9000/igdb/game?id="+this.gid;fetch(t).then((function(e){return e.json()})).then((function(t){return e.setState({apiResponse:t,apiScreenshots:t.screenshots,apiAges:t.age_ratings[0][0],apiGenre:t.genres,apiPlatforms:t.platforms[0][0]})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"cover",value:function(){var e=this,t="http://localhost:9000/igdb/cover?id="+this.gid;fetch(t).then((function(e){return e.text()})).then((function(t){return e.setState({coverUrl:t})})).catch((function(e){return console.log("Error is: ".concat(e))}))}},{key:"initialize",value:function(){var e=this,t="".concat(w.backend_url,"/games/getGameInfo?id=").concat(this.gid);fetch(t).then((function(e){return e.json()})).then((function(t){e.checkHost(t.hosts)})).catch((function(e){return console.warn(e)})),C.a.get("".concat(w.backend_url,"/profile/getCurrentUserInformation")).then((function(t){console.log(t),e.setState({userInfo:t.data,userHosting:t.data.hosting,userFavorites:t.data.favorites}),e.checkFavorite()})).catch((function(e){return console.warn(e)}))}},{key:"checkHost",value:function(e){this.setState({hosts:e});var t=this.props.user._id;e.indexOf(t)>-1&&(this.state.hosting=!0),console.log(this.state.hosts),console.log("hosting is "+this.state.hosting)}},{key:"checkFavorite",value:function(){this.state.userFavorites.indexOf(this.gid)>-1&&(this.setState({liked:!0}),console.log("User has liked this game"))}},{key:"componentDidMount",value:function(){this.initialize(),console.log(this.state.userHosting),this.getGame(),this.cover()}},{key:"render",value:function(){var e=this;return r.a.createElement(Ie,null,r.a.createElement(le.a,null,r.a.createElement(ie.a,{span:8,alignItems:"top"},r.a.createElement("div",{class:"container"},r.a.createElement("img",{height:"375",width:"260",src:"http://"+this.state.coverUrl}),r.a.createElement("br",null),r.a.createElement("div",{class:"small-container"},this.props.user?r.a.createElement(ke.a,{character:r.a.createElement(p.a,{type:"heart"}),count:1,value:this.state.liked,onChange:this.favorite}):r.a.createElement(ke.a,{disabled:!0,character:r.a.createElement(p.a,{type:"heart"}),count:1})),r.a.createElement("br",null),r.a.createElement(N.a,{title:"Where To Play",style:{width:300}},r.a.createElement(T.a,{size:"small",icon:"user"}),r.a.createElement(T.a,{size:"small",icon:"user"}),r.a.createElement(T.a,{size:"small",icon:"user"}),r.a.createElement("br",null),r.a.createElement(f.c,null,"My Hosts"),r.a.createElement("br",null),r.a.createElement(f.c,{to:"/people"},"More Hosts")))),r.a.createElement(ie.a,{span:8},r.a.createElement("div",{class:"container"},r.a.createElement(ye,null,this.state.apiResponse.name),r.a.createElement("br",null),r.a.createElement(Oe,null,this.state.apiResponse.summary),r.a.createElement("br",null),r.a.createElement(ye,{level:2},"Screencap")),r.a.createElement("br",null),r.a.createElement(le.a,{type:"flex",justify:"space-around",align:"middle"},r.a.createElement(ie.a,{span:2},r.a.createElement(T.a,{className:"arrow-left",icon:"left-circle",onClick:this.previous})),r.a.createElement(ie.a,{span:20},r.a.createElement(J.a,Object.assign({class:"carousel",ref:function(t){return e.carousel=t}},{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1}),this.state.apiScreenshots.map((function(e){return r.a.createElement("div",{align:"center",className:"carousel-container"},r.a.createElement("img",{className:"image-container",src:"http:"+e[0].url.replace("t_thumb","t_720p")}))})))),r.a.createElement(ie.a,{span:2},r.a.createElement(T.a,{className:"arrow-right",icon:"right-circle",onClick:this.next})))),r.a.createElement(ie.a,{span:8},r.a.createElement("div",{class:"container"},this.props.user?this.state.hosting?r.a.createElement(y.a,{onClick:this.unhostGame},"Stop Hosting"):r.a.createElement(y.a,{onClick:this.hostGame},"Host"):r.a.createElement("a",{href:"".concat(w.backend_url,"/auth/facebook")},r.a.createElement(y.a,null,"Log in with Facebook")),r.a.createElement("br",null),r.a.createElement(N.a,{title:"Details",style:{width:350}},r.a.createElement(be.a,null,r.a.createElement(be.a.Item,{label:"platform"},this.state.apiPlatforms.name),r.a.createElement(be.a.Item,{label:"version"},this.state.apiPlatforms.versions),r.a.createElement(be.a.Item,{label:"release date"},this.convertDate(1e3*this.state.apiResponse.first_release_date)),r.a.createElement(be.a.Item,{label:"rating"},this.state.apiResponse.rating_count),r.a.createElement(be.a.Item,{label:"suitable for"},this.state.apiAges.synopsis)),r.a.createElement("div",{class:"small-container"},this.state.apiGenre.map((function(e){return r.a.createElement(ve.a,null,e[0].name)}))))))))}}]),t}(r.a.Component),Ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:null},a.setUser=function(e){console.log(e),a.setState({user:e})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.user),r.a.createElement(f.b,null,r.a.createElement("div",null,r.a.createElement(I,{user:this.state.user}),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(P,Object.assign({setUser:e.setUser,user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/inbox",render:function(t){return r.a.createElement(q,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/messages",render:function(t){return r.a.createElement(q,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/games",render:function(t){return r.a.createElement(he,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/people",render:function(t){return r.a.createElement(Ee,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/singlegame",render:function(t){return r.a.createElement(Se,Object.assign({user:e.state.user},t))}}),r.a.createElement(d.a,{path:"/profile",render:function(t){return r.a.createElement(ce,Object.assign({setUser:e.setUser,user:e.state.user},t))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[276,1,2]]]);
//# sourceMappingURL=main.7bafe173.chunk.js.map